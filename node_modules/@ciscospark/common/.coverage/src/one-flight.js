"use strict";
var __cov_oiXcGkzKWDInkBruHyr4qQ = (Function('return this'))();
if (!__cov_oiXcGkzKWDInkBruHyr4qQ.__coverage__) { __cov_oiXcGkzKWDInkBruHyr4qQ.__coverage__ = {}; }
__cov_oiXcGkzKWDInkBruHyr4qQ = __cov_oiXcGkzKWDInkBruHyr4qQ.__coverage__;
if (!(__cov_oiXcGkzKWDInkBruHyr4qQ['packages/common/src/one-flight.js'])) {
   __cov_oiXcGkzKWDInkBruHyr4qQ['packages/common/src/one-flight.js'] = {"path":"packages/common/src/one-flight.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0,0],"12":[0,0],"13":[0,0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"_interopRequireDefault","line":17,"loc":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"skip":true},"2":{"name":"oneFlight","line":26,"loc":{"start":{"line":15,"column":15},"end":{"line":15,"column":53}}},"3":{"name":"oneFlightExecutor","line":37,"loc":{"start":{"line":26,"column":9},"end":{"line":26,"column":45}}},"4":{"name":"(anonymous_4)","line":68,"loc":{"start":{"line":52,"column":20},"end":{"line":52,"column":26}}},"5":{"name":"(anonymous_5)","line":74,"loc":{"start":{"line":58,"column":19},"end":{"line":58,"column":25}}}},"statementMap":{"1":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"2":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"3":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"4":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"5":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"6":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"7":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"8":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"9":{"start":{"line":15,"column":15},"end":{"line":15,"column":15}},"10":{"start":{"line":16,"column":2},"end":{"line":16,"column":2}},"11":{"start":{"line":17,"column":4},"end":{"line":16,"column":13}},"12":{"start":{"line":20,"column":2},"end":{"line":20,"column":2}},"13":{"start":{"line":21,"column":4},"end":{"line":20,"column":11}},"14":{"start":{"line":24,"column":2},"end":{"line":15,"column":53}},"15":{"start":{"line":26,"column":2},"end":{"line":15,"column":53}},"16":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"17":{"start":{"line":27,"column":4},"end":{"line":26,"column":45}},"18":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"19":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"20":{"start":{"line":28,"column":4},"end":{"line":28,"column":4}},"21":{"start":{"line":29,"column":6},"end":{"line":28,"column":26}},"22":{"start":{"line":32,"column":6},"end":{"line":31,"column":9}},"23":{"start":{"line":35,"column":4},"end":{"line":35,"column":4}},"24":{"start":{"line":36,"column":6},"end":{"line":36,"column":12}},"25":{"start":{"line":35,"column":27},"end":{"line":39,"column":6}},"26":{"start":{"line":40,"column":8},"end":{"line":39,"column":31}},"27":{"start":{"line":44,"column":8},"end":{"line":42,"column":11}},"28":{"start":{"line":46,"column":6},"end":{"line":35,"column":27}},"29":{"start":{"line":49,"column":4},"end":{"line":26,"column":45}},"30":{"start":{"line":51,"column":4},"end":{"line":51,"column":4}},"31":{"start":{"line":52,"column":6},"end":{"line":51,"column":59}},"32":{"start":{"line":53,"column":8},"end":{"line":52,"column":26}},"33":{"start":{"line":57,"column":4},"end":{"line":57,"column":4}},"34":{"start":{"line":58,"column":6},"end":{"line":57,"column":59}},"35":{"start":{"line":59,"column":8},"end":{"line":58,"column":25}},"36":{"start":{"line":63,"column":4},"end":{"line":26,"column":45}}},"branchMap":{"1":{"line":17,"type":"cond-expr","locations":[{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true}]},"2":{"line":17,"type":"binary-expr","locations":[{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true}]},"3":{"line":27,"type":"if","locations":[{"start":{"line":16,"column":2},"end":{"line":16,"column":2}},{"start":{"line":16,"column":2},"end":{"line":16,"column":2}}]},"4":{"line":31,"type":"if","locations":[{"start":{"line":20,"column":2},"end":{"line":20,"column":2}},{"start":{"line":20,"column":2},"end":{"line":20,"column":2}}]},"5":{"line":35,"type":"binary-expr","locations":[{"start":{"line":24,"column":12},"end":{"line":24,"column":12}},{"start":{"line":24,"column":23},"end":{"line":24,"column":12}}]},"6":{"line":46,"type":"if","locations":[{"start":{"line":28,"column":4},"end":{"line":28,"column":4}},{"start":{"line":28,"column":4},"end":{"line":28,"column":4}}]},"7":{"line":52,"type":"if","locations":[{"start":{"line":35,"column":4},"end":{"line":35,"column":4}},{"start":{"line":35,"column":4},"end":{"line":35,"column":4}}]},"8":{"line":56,"type":"if","locations":[{"start":{"line":35,"column":27},"end":{"line":35,"column":27}},{"start":{"line":35,"column":27},"end":{"line":35,"column":27}}]},"9":{"line":56,"type":"binary-expr","locations":[{"start":{"line":39,"column":10},"end":{"line":39,"column":10}},{"start":{"line":39,"column":18},"end":{"line":39,"column":18}}]},"10":{"line":67,"type":"if","locations":[{"start":{"line":51,"column":4},"end":{"line":51,"column":4}},{"start":{"line":51,"column":4},"end":{"line":51,"column":4}}]},"11":{"line":67,"type":"binary-expr","locations":[{"start":{"line":51,"column":8},"end":{"line":51,"column":9}},{"start":{"line":51,"column":33},"end":{"line":51,"column":8}},{"start":{"line":51,"column":44},"end":{"line":51,"column":44}}]},"12":{"line":73,"type":"if","locations":[{"start":{"line":57,"column":4},"end":{"line":57,"column":4}},{"start":{"line":57,"column":4},"end":{"line":57,"column":4}}]},"13":{"line":73,"type":"binary-expr","locations":[{"start":{"line":57,"column":8},"end":{"line":57,"column":9}},{"start":{"line":57,"column":33},"end":{"line":57,"column":8}},{"start":{"line":57,"column":44},"end":{"line":57,"column":44}}]}}};
}
__cov_oiXcGkzKWDInkBruHyr4qQ = __cov_oiXcGkzKWDInkBruHyr4qQ['packages/common/src/one-flight.js'];
__cov_oiXcGkzKWDInkBruHyr4qQ.s['1']++;Object.defineProperty(exports,'__esModule',{value:true});__cov_oiXcGkzKWDInkBruHyr4qQ.s['2']++;var _apply=require('babel-runtime/core-js/reflect/apply');__cov_oiXcGkzKWDInkBruHyr4qQ.s['3']++;var _apply2=_interopRequireDefault(_apply);__cov_oiXcGkzKWDInkBruHyr4qQ.s['4']++;var _isFunction=require('lodash/isFunction');__cov_oiXcGkzKWDInkBruHyr4qQ.s['5']++;var _isFunction2=_interopRequireDefault(_isFunction);__cov_oiXcGkzKWDInkBruHyr4qQ.s['6']++;exports.default=oneFlight;function _interopRequireDefault(obj){__cov_oiXcGkzKWDInkBruHyr4qQ.f['1']++;__cov_oiXcGkzKWDInkBruHyr4qQ.s['8']++;return(__cov_oiXcGkzKWDInkBruHyr4qQ.b['2'][0]++,obj)&&(__cov_oiXcGkzKWDInkBruHyr4qQ.b['2'][1]++,obj.__esModule)?(__cov_oiXcGkzKWDInkBruHyr4qQ.b['1'][0]++,obj):(__cov_oiXcGkzKWDInkBruHyr4qQ.b['1'][1]++,{default:obj});}function oneFlight(name,fn,options){__cov_oiXcGkzKWDInkBruHyr4qQ.f['2']++;__cov_oiXcGkzKWDInkBruHyr4qQ.s['10']++;if(!name){__cov_oiXcGkzKWDInkBruHyr4qQ.b['3'][0]++;__cov_oiXcGkzKWDInkBruHyr4qQ.s['11']++;throw new Error('`name` is required');}else{__cov_oiXcGkzKWDInkBruHyr4qQ.b['3'][1]++;}__cov_oiXcGkzKWDInkBruHyr4qQ.s['12']++;if(!fn){__cov_oiXcGkzKWDInkBruHyr4qQ.b['4'][0]++;__cov_oiXcGkzKWDInkBruHyr4qQ.s['13']++;throw new Error('`fn` is required');}else{__cov_oiXcGkzKWDInkBruHyr4qQ.b['4'][1]++;}__cov_oiXcGkzKWDInkBruHyr4qQ.s['14']++;options=(__cov_oiXcGkzKWDInkBruHyr4qQ.b['5'][0]++,options)||(__cov_oiXcGkzKWDInkBruHyr4qQ.b['5'][1]++,{});__cov_oiXcGkzKWDInkBruHyr4qQ.s['15']++;return function oneFlightExecutor(){__cov_oiXcGkzKWDInkBruHyr4qQ.f['3']++;__cov_oiXcGkzKWDInkBruHyr4qQ.s['16']++;var _this=this;__cov_oiXcGkzKWDInkBruHyr4qQ.s['17']++;var promiseName=undefined;__cov_oiXcGkzKWDInkBruHyr4qQ.s['18']++;for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){__cov_oiXcGkzKWDInkBruHyr4qQ.s['19']++;args[_key]=arguments[_key];}__cov_oiXcGkzKWDInkBruHyr4qQ.s['20']++;if((0,_isFunction2.default)(name)){__cov_oiXcGkzKWDInkBruHyr4qQ.b['6'][0]++;__cov_oiXcGkzKWDInkBruHyr4qQ.s['21']++;promiseName='$promise'+(0,_apply2.default)(name,this,args);}else{__cov_oiXcGkzKWDInkBruHyr4qQ.b['6'][1]++;__cov_oiXcGkzKWDInkBruHyr4qQ.s['22']++;promiseName='$promise'+name;}__cov_oiXcGkzKWDInkBruHyr4qQ.s['23']++;if(this[promiseName]){__cov_oiXcGkzKWDInkBruHyr4qQ.b['7'][0]++;__cov_oiXcGkzKWDInkBruHyr4qQ.s['24']++;var message='one flight: attempted to invoke '+name+' while previous invocation still in flight';__cov_oiXcGkzKWDInkBruHyr4qQ.s['25']++;if((__cov_oiXcGkzKWDInkBruHyr4qQ.b['9'][0]++,this)&&(__cov_oiXcGkzKWDInkBruHyr4qQ.b['9'][1]++,this.logger)){__cov_oiXcGkzKWDInkBruHyr4qQ.b['8'][0]++;__cov_oiXcGkzKWDInkBruHyr4qQ.s['26']++;this.logger.info(message);}else{__cov_oiXcGkzKWDInkBruHyr4qQ.b['8'][1]++;__cov_oiXcGkzKWDInkBruHyr4qQ.s['27']++;console.info(message);}__cov_oiXcGkzKWDInkBruHyr4qQ.s['28']++;return this[promiseName];}else{__cov_oiXcGkzKWDInkBruHyr4qQ.b['7'][1]++;}__cov_oiXcGkzKWDInkBruHyr4qQ.s['29']++;var promise=this[promiseName]=(0,_apply2.default)(fn,this,args);__cov_oiXcGkzKWDInkBruHyr4qQ.s['30']++;if((__cov_oiXcGkzKWDInkBruHyr4qQ.b['11'][0]++,!options.cacheFailure)&&(__cov_oiXcGkzKWDInkBruHyr4qQ.b['11'][1]++,promise)&&(__cov_oiXcGkzKWDInkBruHyr4qQ.b['11'][2]++,promise.catch)){__cov_oiXcGkzKWDInkBruHyr4qQ.b['10'][0]++;__cov_oiXcGkzKWDInkBruHyr4qQ.s['31']++;promise.catch(function(){__cov_oiXcGkzKWDInkBruHyr4qQ.f['4']++;__cov_oiXcGkzKWDInkBruHyr4qQ.s['32']++;_this[promiseName]=null;});}else{__cov_oiXcGkzKWDInkBruHyr4qQ.b['10'][1]++;}__cov_oiXcGkzKWDInkBruHyr4qQ.s['33']++;if((__cov_oiXcGkzKWDInkBruHyr4qQ.b['13'][0]++,!options.cacheSuccess)&&(__cov_oiXcGkzKWDInkBruHyr4qQ.b['13'][1]++,promise)&&(__cov_oiXcGkzKWDInkBruHyr4qQ.b['13'][2]++,promise.catch)){__cov_oiXcGkzKWDInkBruHyr4qQ.b['12'][0]++;__cov_oiXcGkzKWDInkBruHyr4qQ.s['34']++;promise.then(function(){__cov_oiXcGkzKWDInkBruHyr4qQ.f['5']++;__cov_oiXcGkzKWDInkBruHyr4qQ.s['35']++;_this[promiseName]=null;});}else{__cov_oiXcGkzKWDInkBruHyr4qQ.b['12'][1]++;}__cov_oiXcGkzKWDInkBruHyr4qQ.s['36']++;return promise;};}
