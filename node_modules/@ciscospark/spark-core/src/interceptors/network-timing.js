/**!
 *
 * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.
 */

import {Interceptor} from '@ciscospark/http-core';

export default class NetworkTimingInterceptor extends Interceptor {
  static create(options) {
    return new NetworkTimingInterceptor(options);
  }

  onRequest(options) {
    options.$timings = options.$timings || {};
    options.$timings.networkStart = Date.now();
    return options;
  }

  onResponse(options, response) {
    options.$timings.networkEnd = Date.now();
    return response;
  }

  onResponseError(options, reason) {
    options.$timings.networkEnd = Date.now();
    return Promise.reject(reason);
  }
}
