{"version":3,"sources":["../../src/lib/spark-plugin.js"],"names":[],"mappings":";;;;;;;;;;;;AAOA,IAAM,cAAc,yBAAS,MAAT,CAAgB;AAClC,WAAS;AACP,YAAQ;AACN,YAAM,yBAAN;AAIA,wBAAK;AACH,YAAI,KAAK,KAAL,IAAc,KAAK,KAAL,CAAW,MAAX,EAAmB;AACnC,cAAM,YAAY,KAAK,YAAL,EAAZ,CAD6B;AAEnC,cAAI,SAAJ,EAAe;AACb,mBAAO,KAAK,KAAL,CAAW,MAAX,CAAkB,UAAU,WAAV,EAAlB,CAAP,CADa;WAAf;;AAIA,iBAAO,KAAK,KAAL,CAAW,MAAX,CAN4B;SAArC;OANI;KAAR;;AAiBA,YAAQ;AACN,YAAM,yBAAN;AAIA,wBAAK;AACH,eAAO,KAAK,KAAL,CAAW,MAAX,IAAqB,OAArB,CADJ;OALC;KAAR;;AAUA,WAAO;AACL,YAAM,UAAN;AACA,wBAAK;AACH,YAAI,CAAC,KAAK,MAAL,IAAe,CAAC,KAAK,UAAL,EAAiB;AACpC,gBAAM,IAAI,KAAJ,mKAAN,CADoC;SAAtC;;;AADG,YAMC,SAAS,IAAT;;AAND,eAQI,OAAO,MAAP,IAAiB,OAAO,UAAP,EAAmB;AACzC,mBAAS,OAAO,MAAP,IAAiB,OAAO,UAAP,CADe;SAA3C;;AAIA,eAAO,MAAP,CAZG;OAFA;KAAP;GA5BF;;AA+CA,WAAS;AACP,YAAQ;AACN,iBADM;KAAR;GADF;;AAMA,8BAAiB;;;AACf,WAAO,eAAK,KAAL,EAAW,OAAX,yBAAP,CADe;GAtDiB;AA0DlC,4BAAgB;;;AACd,WAAO,gBAAK,KAAL,EAAW,MAAX,0BAAP,CADc;GA1DkB;CAAhB,CAAd;;;;;kBA+DS","file":"spark-plugin.js","sourcesContent":["/**!\n *\n * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.\n */\n\nimport AmpState from 'ampersand-state';\n\nconst SparkPlugin = AmpState.extend({\n  derived: {\n    config: {\n      deps: [\n        `spark`,\n        `spark.config`\n      ],\n      fn() {\n        if (this.spark && this.spark.config) {\n          const namespace = this.getNamespace();\n          if (namespace) {\n            return this.spark.config[namespace.toLowerCase()];\n          }\n\n          return this.spark.config;\n        }\n      }\n    },\n\n    logger: {\n      deps: [\n        `spark`,\n        `spark.logger`\n      ],\n      fn() {\n        return this.spark.logger || console;\n      }\n    },\n\n    spark: {\n      deps: [`parent`],\n      fn() {\n        if (!this.parent && !this.collection) {\n          throw new Error(`Cannot determine \\`this.spark\\` without \\`this.parent\\` or \\`this.collection\\`. Please initialize \\`this\\` via \\`children\\` or \\`collection\\` or set \\`this.parent\\` manually`);\n        }\n\n        /* jscs:disable */\n        let parent = this;\n        /* jscs:enable */\n        while (parent.parent || parent.collection) {\n          parent = parent.parent || parent.collection;\n        }\n\n        return parent;\n      }\n    }\n  },\n\n  session: {\n    parent: {\n      type: `any`\n    }\n  },\n\n  request(...args) {\n    return this.spark.request(...args);\n  },\n\n  upload(...args) {\n    return this.spark.upload(...args);\n  }\n});\n\nexport default SparkPlugin;\n"]}